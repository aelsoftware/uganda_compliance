{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-04-08 17:35:25.901166",
 "css": ".table_data {\n    text-align: left;\n    padding-left: 10px !important;\n    /*line-height: 0px;*/\n}\n.section_head {\n    text-align: center;\n    font-weight: 700;\n    /*line-height: 0px;*/\n}\n td { \n    border: 1px solid black;\n}\n\n.top_info{\n    border: none;\n    font-weight: bold; \n    font-size: 16px; \n    text-align: center; \n    vertical-align: bottom;\n}\n.main {\n    width: 100%; \n    border: 1px solid black;\n    font-size: 10px;\n    color: #000000;\n    vertical-align: bottom;\n}\n.top_left td:nth-child(1){\n    border-right: none; \n}\n.top_left td:nth-child(2){\n    border-left: none; \n}\n.qrcode{\n    text-align: center;\n    vertical-align: middle;\n}\n.footer{\n    text-align: center;\n    font-weight: bold;\n}\n.no_left_border{\n    border-left: none;\n}",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "E Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<table class=\"main\">\n    <tbody>\n        <tr style=\"vertical-align: bottom;\">\n            <td class=\"top_info\" colspan=\"2\">\n                {% set ura_logo_path = '/files/ura_efris_logo.png' %}\n                {% if ura_logo_path %}\n                    <img src=\"{{ ura_logo_path }}\" alt=\"ura efris logo\" style=\"float: left; max-width: 25%; height: auto;\">\n                {% endif %}\n            </td>\n            <td class=\"top_info\" colspan=\"3\">\n        \n               {% set is_return = doc.is_return %}\n               {% if is_return %}\n               CREDIT NOTE\n               {% else %}\n               E-INVOICE / TAX INVOICE\n               {% endif %}\n            </td>\n            <td class=\"no_left_border\" colspan=\"2\">\n                {% set efris_company_logo = frappe.db.get_value('Company', doc.company, 'company_logo') %}\n                \n                {% if efris_company_logo %}\n                    <img src=\"{{ efris_company_logo }}\" alt=\"eezy group logo\" style=\"float: right; max-width: 25%; height: auto;\">\n                {% endif %}\n            </td>\n        </tr>\n        <tr class=\"section_head\">\n            <td colspan=\"7\">\n                Section A: Seller's Details\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                BRN:\n            </td>\n            <td colspan=\"5\">\n                {% set seller_nin_or_brn = doc.seller_nin_or_brn %}\n                {% if seller_nin_or_brn %}\n                    {{ seller_nin_or_brn }}\n                {% else %}\n                    {{\"None\"}}\n                {% endif %}\n            </td>\n        </tr>\n         <tr class=\"table_data\">\n            <td colspan=\"2\">\n                TIN:\n            </td>\n            <td colspan=\"5\">\n                {% set seller_gstin = doc.seller_gstin %}\n                {% if seller_gstin %}\n                    {{ seller_gstin }}\n                {% else %}\n                    {{\"None\"}}\n                {% endif %}\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Legal Name:\n            </td>\n            <td colspan=\"5\">\n                {% set seller_legal_name = doc.seller_legal_name %}\n                {% if seller_legal_name %}\n                    {{ seller_legal_name }}\n                {% else %}\n                    {{\"None\"}}\n                {% endif %}\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Trade Name:\n            </td>\n            <td colspan=\"5\">\n                {% set seller_trade_name = doc.seller_trade_name %}\n                {% if seller_trade_name %}\n                    {{ seller_trade_name }}\n                {% else %}\n                    {{\"None\"}}\n                {% endif %}\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Address:\n            </td>\n            <td colspan=\"5\">\n                {% set seller_address = doc.seller_address %}\n                {% if seller_address %}\n                    {{ seller_address }}\n                {% else %}\n                    {{\"None\"}}\n                {% endif %}\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Seller's Reference Number:\n            </td>\n            <td colspan=\"5\">\n                {% set seller_reference_no = doc.seller_reference_no %}\n                {% if seller_reference_no %}\n                    {{ seller_reference_no }}\n                {% else %}\n                    {{\"None\"}}\n                {% endif %}\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Served by:\n            </td>\n            <td colspan=\"5\">\n                {% set served_by = doc.operator %}\n                {% if served_by %}\n                    {{ served_by }}\n                {% else %}\n                    {{\"None\"}}\n                {% endif %}\n            </td>\n        </tr>\n        <tr class=\"section_head\">\n            <td colspan=\"7\">\n                Section B: URA Information\n            </td>\n        </tr>\n          <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Document Type:\n            </td>\n            <td colspan=\"5\">\n                {% set document_type = doc.invoice_type %}\n                {% if document_type %}\n                    {{ document_type }}\n                {% else %}\n                    {{\"None\"}}\n                {% endif %}\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Issued Date:\n            </td>\n            <td colspan=\"5\">\n                {% set issued_date = doc.invoice_date %}\n                {% if issued_date %}\n                    {{ issued_date }}\n                {% else %}\n                    {{\"None\"}}\n                {% endif %}\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Issued Time:\n            </td>\n            <td colspan=\"5\">\n                {% set issued_time = doc.issued_time %}\n                {% if issued_time %}\n                    {{ issued_time }}\n                {% else %}\n                    {{\"None\"}}\n                {% endif %}\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Device Number:\n            </td>\n            <td colspan=\"5\">\n                {% set device_no = doc.device_no %}\n                {% if device_no %}\n                    {{ device_no }}\n                {% else %}\n                    {{\"None\"}}\n                {% endif %}\n            </td>\n        </tr>\n        {% set is_return = doc.is_return %}\n        {% if is_return %}\n        <tr class=\"table_data\">\n                <td colspan=\"2\">\n                Credit Note Number.:\n                </td>\n            <td colspan=\"5\">\n                {{doc.irn}}\n             </td>\n        </tr>\n        {% endif %}\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Fiscal Document Number:\n            </td>\n            <td colspan=\"5\">\n               {% set is_return = doc.is_return %}\n               {% if is_return %}\n                {{doc.original_fdn}}\n               {% else %}\n               {{doc.irn}}\n               {% endif %}\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Verification Code:\n            </td>\n            <td colspan=\"5\">\n                {% set ver_code = doc.antifake_code %}\n                {% if ver_code %}\n                    {{ ver_code }}\n                {% else %}\n                    {{\"None\"}}\n                {% endif %}\n            </td>\n        </tr>\n        {% set is_return = doc.is_return %}\n        {% if is_return and doc.efris_creditnote_reasoncode%}\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Issued Reasons:\n            </td>\n            <td colspan=\"5\">\n                {% set reason_remarks = doc.efris_creditnote_reasoncode.split(\":\")[1] %}\n                {% if reason_remarks %}\n                    {{ reason_remarks }}\n                {% endif %}\n            </td>\n        </tr>\n        {% endif %}\n         <tr class=\"section_head\">\n <td colspan=\"7\">\n  Section C: Buyer's Details\n </td>\n  </tr>\n     <tr class=\"table_data\">\n  <td colspan=\"2\">\n  BRN:\n </td>\n <td colspan=\"5\">\n {% set buyer_nin_or_brn = doc.buyer_nin_or_brn %}\n {% if buyer_nin_or_brn %}\n {{ buyer_nin_or_brn }}\n  {% else %}\n   {{\"None\"}}\n {% endif %}\n  </td>\n </tr>\n <tr class=\"table_data\">\n   <td colspan=\"2\">\n TIN:\n  </td>\n  <td colspan=\"5\">\n   {% set buyer_gstin = doc.buyer_gstin %}\n {% if buyer_gstin %}\n {{ buyer_gstin }}\n  {% else %}\n {{\"None\"}}\n {% endif %}\n </td>\n </tr>\n   <tr class=\"table_data\">\n <td colspan=\"2\">\n         Name:\n </td>\n  <td colspan=\"5\">\n  {% set buyer_legal_name = doc.buyer_legal_name %}\n                {% if buyer_legal_name %}\n        {{ buyer_legal_name }}\n {% else %}\n                    None\n                {% endif %}\n            </td>\n        </tr>\n        <tr class=\"section_head\">\n            <td colspan=\"7\">\n                Section D: Goods & Services Details\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td width=\"5%\">\n                <b>No.</b>\n            </td>\n            <td width=\"20%\">\n                <b>Item</b>\n            </td>\n            <td width=\"15%\">\n                <b>Quantity</b>\n            </td>\n            <td width=\"15%\">\n                <b>Unit Measure</b>\n            </td>\n            <td width=\"15%\">\n                <b>Unit Price</b>\n            </td>\n            <td width=\"15%\">\n                <b>Total</b>\n            </td>\n            <td width=\"15%\">\n                <b>Tax Category</b>\n            </td>\n        </tr>\n        {% set items = doc.items %}\n        {% set additional_discount_percentage = doc.additional_discount_percentage | float %}\n\n        {% for item in items %}\n            {% set item_name = item.item_name %}\n            {% set item_quantity = item.quantity %}\n            {% set item_unit = item.unit %}\n            {% set item_rate = item.rate %}\n            {% set item_amount = item.amount %}\n            {% set e_tax_category = item.e_tax_category %}\n            {% set e_tax_code = e_tax_category[3:4] %}\n            {% set discount_amount = ((item_amount * -1) * (additional_discount_percentage / 100)) | round(2) %}\n    \n        <!-- Main Item Row -->\n        <tr class=\"table_data\">\n            <td width=\"5%\">\n                {{ loop.index }}\n            </td>\n            <td width=\"20%\">\n                {{ item_name }}\n            </td>\n            <td width=\"15%\">\n                {{ item_quantity }}\n            </td>\n            <td width=\"15%\">\n                {{ item_unit }}\n            </td>\n            <td width=\"15%\">\n                {% set formatted_item_rate = frappe.format(item_rate, {'fieldtype': 'Currency'}) %}\n                {% set formatted_item_rate = formatted_item_rate.replace(\"Sh\", '') %}\n                {{ formatted_item_rate.replace(\".00\", '') }}\n            </td>\n            <td width=\"15%\">\n                {% set formatted_item_amount = frappe.format(item_amount, {'fieldtype': 'Currency'}) %}\n                {% set formatted_item_amount = formatted_item_amount.replace(\"Sh\", '') %}\n                {{ formatted_item_amount.replace(\".00\", '') }}\n            </td>\n            <td width=\"15%\">\n                {{ e_tax_code }}\n            </td>\n        </tr>\n    \n        <!-- Discount Row: Only Add If There Is a Discount -->\n        {% if additional_discount_percentage > 0 and discount_amount != 0 %}\n        <tr class=\"table_data\">\n            <td width=\"5%\">\n                {{ loop.index }}\n            </td>\n            <td width=\"20%\">\n                {{ item_name }} (Discount)\n            </td>\n            <td width=\"15%\">\n            </td>\n            <td width=\"15%\">\n            </td>\n            <td width=\"15%\">\n            </td>\n            <td width=\"15%\">\n                {% set formatted_discount_amount = frappe.format(discount_amount, {'fieldtype': 'Currency'}) %}\n                {% set formatted_discount_amount = formatted_discount_amount.replace(\"Sh\", '') %}\n                {{ formatted_discount_amount.replace(\".00\", '') }}\n            </td>\n            <td width=\"15%\">\n            </td>\n        </tr>\n        {% endif %}\n        {% endfor %}\n        <tr class=\"section_head\">\n            <td colspan=\"7\">\n                Section E: Tax Details\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2.5\">\n                <b>Tax Category</b>\n            </td>\n            <td colspan=\"2.5\">\n                <b>Net Amount</b>\n            </td>\n            <td colspan=\"2.5\">\n                <b>Tax Amount</b>\n            </td>\n            <td colspan=\"2.5\">\n                <b>Gross Amount</b>\n            </td>\n                \n        </tr>\n        {% set taxes = doc.taxes %}\n        {% for tax in taxes %}\n            {% set tax_cat_code = tax.tax_category_code %}\n            {% set tax_cat = tax_cat_code[3: ] %}\n            \n            {% set net_amount = tax.net_amount %}\n    \n            {% set tax_amount = tax.tax_amount %}\n            {% set tax_rate = tax.tax_rate %}\n            {% set formatted_tax_amount = doc.get_formatted(\"tax_amount\") %}\n            \n            {% set gross_amount = tax.gross_amount %}\n            {# {% set formatted_gross_amount = doc.get_formatted(\"gross_amount\") %} #}\n            \n            <tr class=\"table_data\">\n                <td colspan=\"2.5\">\n                    {{ tax_cat }}\n                </td>\n                <td colspan=\"2.5\">\n                    <!-- tax net amount column -->\n                    {% set formatted_net_amount = frappe.format(net_amount, {'fieldtype': 'Currency'}) %}\n                    {% set formatted_net_amount = formatted_net_amount.replace(\"Sh\", '') %}\n                    {{ formatted_net_amount.replace(\".00\", '') }}\n                </td>\n                <td colspan=\"2.5\">\n                    <!-- tax_amount column -->\n                    {% if tax.tax_category_code == '03:C: Exempt (-)' %}\n                        {{ tax_rate }}\n                        \n                    {% else %}\n                    \n                        {% set formatted_tax_amount = frappe.format(tax_amount, {'fieldtype': 'Currency'}) %}\n                        {% set formatted_tax_amount = formatted_tax_amount.replace(\"Sh\", '') %}\n                        {{ formatted_tax_amount.replace(\".00\", '') }}\n                       \n                    {% endif %}\n                </td>\n                <td colspan=\"2.5\">\n                    <!-- tax_gross_amount column -->\n                    {% set formatted_gross_amount = frappe.format(gross_amount, {'fieldtype': 'Currency'}) %}\n                    {% set formatted_gross_amount = formatted_gross_amount.replace(\"Sh\", '') %}\n                    {{ formatted_gross_amount.replace(\".00\", '') }} \n                </td>\n            </tr>\n        {% endfor %}\n        <tr class=\"section_head\">\n            <td colspan=\"7\">\n                Section F: Summary\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Net Amount:\n            </td>\n            <td colspan=\"5\">\n               {% set doc_net_amount = doc.net_amount %}\n               {% set formatted_net_amount = frappe.format(doc_net_amount, {'fieldtype': 'Currency'}) %}\n               {% set formatted_net_amount = formatted_net_amount.replace(\"Sh\", '') %}\n               {{ formatted_net_amount }}\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Tax Amount:\n            </td>\n            <td colspan=\"5\">\n               {% set doc_tax_amount = doc.tax_amount %}\n               {% set formatted_tax_amount = frappe.format(doc_tax_amount, {'fieldtype': 'Currency'}) %}\n               {% set formatted_tax_amount = formatted_tax_amount.replace(\"Sh\", '') %}\n               {{ formatted_tax_amount }}\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Gross Amount:\n            </td>\n            <td colspan=\"5\">\n               {% set doc_gross_amount = doc.gross_amount %}\n               {% set formatted_gross_amount = frappe.format(doc_gross_amount, {'fieldtype': 'Currency'}) %}\n               {% set formatted_gross_amount = formatted_gross_amount.replace(\"Sh\", '') %}\n               {{ formatted_gross_amount }}\n               <br>\n               {% set gross_in_words = frappe.utils.money_in_words(doc.gross_amount) %}\n               {% set gross_words = gross_in_words.replace(\"UGX\", '') %}\n               {{ gross_words.replace(\"only\", 'shillings only') }} \n            </td>\n        </tr>\n          </tr>\n        {% set payments = doc.e_payments %}\n        {% if payments %}\n            <tr class=\"section_head\">\n                <td colspan=\"2\">\n                    Payment Mode\n                </td>\n            </tr>\n                {% set credit_amount = doc.credit_amount %}\n                {% set paid_amount = doc.paid_amount %}\n                {%set paid_amount = paid_amount + credit_amount%}\n                {% for mode in payments %}\n                    {% set payment_mode = mode.mode_of_payment %}\n                    {% set amount = mode.amount | default(0) | float %}\n                    <tr class=\"table_data\">\n                        <td colspan=\"2\">\n                            {{ payment_mode }}\n                        </td>\n                        <td colspan=\"5\">\n                            {% set formatted_amount = frappe.format(amount, {'fieldtype': 'Currency'}) %}\n                            {% set formatted_amount = formatted_amount.replace(\"Sh\", '') %}\n                            {{ formatted_amount }} <!-- Debugging: Ensure this prints the correct amount -->\n                        </td>\n                    </tr>\n            {% endfor %}\n                <tr class=\"table_data\">\n                <td colspan=\"2\"><b>\n                    Total Amount:\n                </b></td>\n                <td colspan=\"5\">\n                    {% set formatted_paid_amount = frappe.format(paid_amount, {'fieldtype': 'Currency'}) %}\n                    {% set formatted_paid_amount = formatted_paid_amount.replace(\"Sh\", '') %}\n                    {{ formatted_paid_amount}} <!-- Display total rounded to 2 decimal places -->\n                </td>\n            </tr>\n        {% endif %}\n\n         <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Currency:\n            </td>\n            <td colspan=\"5\">\n               {{doc.currency}} \n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Number of Items:\n            </td>\n            <td colspan=\"5\">\n               {{ doc.items|length }}\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Mode:\n            </td>\n            <td colspan=\"5\">\n               Online\n            </td>\n        </tr>\n        <tr class=\"table_data\">\n            <td colspan=\"2\">\n                Remarks:\n            </td>\n            <td colspan=\"5\">\n              \n            </td>\n        </tr>\n        <tr>\n            <td colspan=\"7\" class=\"qrcode\">\n                <img src=\"{{ doc.qr_code_data}}\" alt=\"URA Logo\"  style=\"padding-top: 6px; padding-bottom: 6px; max-width: 30%; height: auto;\">\n            </td>\n        </tr>\n        <tr class=\"footer\">\n            <td colspan=\"7\">\n                *** END OF e-INVOICE/TAX INVOICE ***\n            </td>\n        </tr>\n        \n    </tbody>\n</table>\n\n\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-04-24 00:37:25.459944",
 "modified_by": "Administrator",
 "module": "EFRIS",
 "name": "EFRIS E Invoice",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}